(()=>{var e={};e.id=702,e.ids=[702],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},96195:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>g,pages:()=>c,routeModule:()=>h,tree:()=>l});var s=a(67096),r=a(16132),n=a(37284),i=a.n(n),d=a(32564),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);a.d(t,o);let l=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,42918)),"/Users/varun/Desktop/Habit Tracker/src/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,33533)),"/Users/varun/Desktop/Habit Tracker/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/varun/Desktop/Habit Tracker/src/app/dashboard/page.tsx"],g="/dashboard/page",x={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},26294:(e,t,a)=>{Promise.resolve().then(a.bind(a,97131))},97131:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Dashboard});var s=a(30784),r=a(9885),n=a(11821),i=a(87852),d=a(75923),o=a(78842),l=a(51910),c=a(11922),g=a(28348),x=a(1264),h=a(56206),p=a(68375),u=a(91745),b=a(80467),y=a(22345);function Dashboard(){let[e,t]=(0,r.useState)(new Date),[a,m]=(0,r.useState)([]),[f,k]=(0,r.useState)([]),[j,v]=(0,r.useState)(null),[S,P]=(0,r.useState)([]),[w,N]=(0,r.useState)(!0),fetchData=async()=>{N(!0);let t=(0,n.ZP)(e,"yyyy-MM-dd"),[a,s,r,i]=await Promise.all([fetch("/api/habits"),fetch("/api/streaks"),fetch(`/api/days?date=${t}`),fetch(`/api/streaks/log?date=${t}`)]),d=await a.json();m(d.filter(e=>e.isActive));let o=await s.json();k(o.filter(e=>e.isActive)),v(await r.json()),P(await i.json()),N(!1)};(0,r.useEffect)(()=>{fetchData()},[e]);let handleStatusChange=async(t,s)=>{let r=j?.entries||[],i=r.findIndex(e=>e.habitId===t),d=[...r];i>=0?d[i]={...d[i],status:s}:d.push({habitId:t,status:s});let o=0;for(let e of d){let t=a.find(t=>t.id===e.habitId);t&&("COMPLETED"===e.status?o+=t.points:"MISSED"===e.status&&(o+=t.missedPoints))}v(t=>({...t,id:t?.id||"temp",date:(0,n.ZP)(e,"yyyy-MM-dd"),totalScore:o,entries:d})),await fetch("/api/days",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:(0,n.ZP)(e,"yyyy-MM-dd"),entries:d})})},handleStreakUpdate=async(t,a)=>{let s=[...S],r=s.findIndex(e=>e.streakId===t);r>=0?s[r]={...s[r],status:a}:s.push({streakId:t,status:a}),P(s);let i=await fetch("/api/streaks/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({streakId:t,date:(0,n.ZP)(e,"yyyy-MM-dd"),status:a})}),d=await i.json();d.streak&&k(e=>e.map(e=>e.id===d.streak.id?d.streak:e))},getHabitStatus=e=>j?.entries.find(t=>t.habitId===e)?.status||"UNTRACKED",getStreakStatus=e=>S.find(t=>t.streakId===e)?.status||"UNTRACKED";return(0,s.jsxs)("div",{className:"space-y-8 pb-20",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between glass-panel p-4",children:[s.jsx("button",{onClick:()=>t((0,i.Z)(e,1)),className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors",children:s.jsx(l.Z,{})}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold",children:(0,o.Z)(e,new Date)?"Today":(0,n.ZP)(e,"EEEE")}),s.jsx("p",{className:"text-gray-500",children:(0,n.ZP)(e,"MMMM d, yyyy")})]}),s.jsx("button",{onClick:()=>t((0,d.Z)(e,1)),className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors",children:s.jsx(c.Z,{})})]}),(0,s.jsxs)(u.E.div,{initial:{scale:.9},animate:{scale:1},className:(0,b.cn)("text-center p-8 rounded-3xl transition-colors duration-500",(j?.totalScore||0)>0?"bg-green-500/10 text-green-600 dark:bg-green-500/20 dark:text-green-400":0>(j?.totalScore||0)?"bg-red-500/10 text-red-600 dark:bg-red-500/20 dark:text-red-400":"bg-gray-100 text-gray-500 dark:bg-white/5 dark:text-gray-400"),children:[(0,s.jsxs)("span",{className:"text-6xl font-black tracking-tighter",children:[(j?.totalScore||0)>0?"+":"",j?.totalScore||0]}),s.jsx("p",{className:"text-sm font-medium opacity-80 mt-2 uppercase tracking-wide",children:"Daily Score"})]},j?.totalScore),f.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2 text-orange-500",children:[s.jsx(g.Z,{size:20,className:"fill-orange-500"}),"Active Streaks"]}),s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:f.map(e=>s.jsx(y.Z,{streak:e,status:getStreakStatus(e.id),onUpdateStatus:handleStreakUpdate,compact:!0},e.id))})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-500",children:"Habits"}),w?s.jsx("p",{className:"text-center text-gray-500 py-12",children:"Loading habits..."}):a.map((e,t)=>{let a=getHabitStatus(e.id);return(0,s.jsxs)(u.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:(0,b.cn)("glass-panel p-4 flex flex-col md:flex-row items-center justify-between gap-4 transition-all duration-300","COMPLETED"===a?"border-green-500/30 bg-green-50/50 dark:bg-green-900/10":"MISSED"===a?"border-red-500/30 bg-red-50/50 dark:bg-red-900/10":"SKIPPED"===a?"opacity-60":""),children:[(0,s.jsxs)("div",{className:"flex-1 text-center md:text-left",children:[s.jsx("h3",{className:"text-lg font-bold",children:e.name}),(0,s.jsxs)("div",{className:"text-xs font-medium text-gray-400 flex gap-2 justify-center md:justify-start mt-1",children:[(0,s.jsxs)("span",{children:["Done: ",e.points>0?"+":"",e.points]}),s.jsx("span",{children:"â€¢"}),(0,s.jsxs)("span",{children:["Miss: ",e.missedPoints>0?"+":"",e.missedPoints]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>handleStatusChange(e.id,"COMPLETED"),className:(0,b.cn)("p-4 rounded-xl transition-all","COMPLETED"===a?"bg-green-500 text-white shadow-lg shadow-green-500/30 scale-105":"bg-gray-100 dark:bg-white/5 text-gray-400 hover:bg-green-100 dark:hover:bg-green-900/20 hover:text-green-600"),children:s.jsx(x.Z,{size:24})}),s.jsx("button",{onClick:()=>handleStatusChange(e.id,"MISSED"),className:(0,b.cn)("p-4 rounded-xl transition-all","MISSED"===a?"bg-red-500 text-white shadow-lg shadow-red-500/30 scale-105":"bg-gray-100 dark:bg-white/5 text-gray-400 hover:bg-red-100 dark:hover:bg-red-900/20 hover:text-red-600"),children:s.jsx(h.Z,{size:24})}),s.jsx("button",{onClick:()=>handleStatusChange(e.id,"SKIPPED"),className:(0,b.cn)("p-4 rounded-xl transition-all","SKIPPED"===a?"bg-gray-500 text-white shadow-lg shadow-gray-500/30 scale-105":"bg-gray-100 dark:bg-white/5 text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10 hover:text-gray-600"),children:s.jsx(p.Z,{size:24})})]})]},e.id)})]})]})}},42918:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var s=a(95153);let r=(0,s.createProxy)(String.raw`/Users/varun/Desktop/Habit Tracker/src/app/dashboard/page.tsx`),{__esModule:n,$$typeof:i}=r,d=r.default,o=d}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[964,821,141,614,111,345],()=>__webpack_exec__(96195));module.exports=a})();