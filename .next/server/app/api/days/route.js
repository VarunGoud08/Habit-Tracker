"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29354:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>y,originalPathname:()=>m,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>_});var r={};a.r(r),a.d(r,{GET:()=>GET,POST:()=>POST}),a(78976);var s=a(10884),i=a(16132),n=a(95798),o=a(7542),u=a(63340),d=a(99964);async function GET(e){let{searchParams:t}=new URL(e.url),a=t.get("date");if(!a)return n.Z.json({error:"Date is required"},{status:400});let r=(0,d.Z)(a),s=(0,u.Z)(r);try{let e=await o._.dayLog.findFirst({where:{date:s},include:{entries:!0}});if(!e)return n.Z.json(null);return n.Z.json(e)}catch(e){return n.Z.json({error:"Failed to fetch daily log"},{status:500})}}async function POST(e){try{let t=await e.json(),{date:a,entries:r}=t,s=(0,u.Z)((0,d.Z)(a)),i=await o._.habit.findMany(),l=0;for(let e of r){let t=i.find(t=>t.id===e.habitId);t&&("COMPLETED"===e.status?l+=t.points:"MISSED"===e.status&&(l+=t.missedPoints))}let p=await o._.dayLog.upsert({where:{date:s},update:{totalScore:l,entries:{deleteMany:{},create:r.map(e=>({habitId:e.habitId,status:e.status}))}},create:{date:s,totalScore:l,entries:{create:r.map(e=>({habitId:e.habitId,status:e.status}))}},include:{entries:!0}});return n.Z.json(p)}catch(e){return console.error(e),n.Z.json({error:"Failed to save daily log"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/days/route",pathname:"/api/days",filename:"route",bundlePath:"app/api/days/route"},resolvedPagePath:"/Users/varun/Desktop/Habit Tracker/src/app/api/days/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:c,serverHooks:h,headerHooks:y,staticGenerationBailout:_}=l,m="/api/days/route"},7542:(e,t,a)=>{a.d(t,{_:()=>i});let r=require("@prisma/client"),s=globalThis,i=s.prisma??new r.PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[955,444],()=>__webpack_exec__(29354));module.exports=a})();