(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{81291:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(62898);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},17158:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(62898);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8011:function(e,t,n){Promise.resolve().then(n.bind(n,38268))},38268:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return HistoryPage}});var r=n(57437),a=n(2265),s=n(36076),date_fns_eachDayOfInterval=function(e,t){let n=(0,s.Q)(e.start),r=(0,s.Q)(e.end),a=+n>+r,l=a?+n:+r,i=a?r:n;i.setHours(0,0,0,0);let o=t?.step??1;if(!o)return[];o<0&&(o=-o,a=!a);let c=[];for(;+i<=l;)c.push((0,s.Q)(i)),i.setDate(i.getDate()+o),i.setHours(0,0,0,0);return a?c.reverse():c},l=n(53086),i=n(43568);function addMonths(e,t){let n=(0,s.Q)(e);if(isNaN(t))return(0,i.L)(e,NaN);if(!t)return n;let r=n.getDate(),a=(0,i.L)(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);let l=a.getDate();return r>=l?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}var date_fns_endOfMonth=function(e){let t=(0,s.Q)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t},date_fns_startOfMonth=function(e){let t=(0,s.Q)(e);return t.setDate(1),t.setHours(0,0,0,0),t},date_fns_getDay=function(e){let t=(0,s.Q)(e),n=t.getDay();return n},o=n(79303),c=n(60345),d=n(81291),u=n(17158);function HistoryPage(){let[e,t]=(0,a.useState)([]),[n,s]=(0,a.useState)(new Date);(0,a.useEffect)(()=>{fetch("/api/history").then(e=>e.json()).then(t)},[]);let i=date_fns_startOfMonth(n),h=date_fns_endOfMonth(n),f=date_fns_eachDayOfInterval({start:i,end:h}),g=date_fns_getDay(i),x=Array(g).fill(null),getScore=t=>{let n=(0,l.ZP)(t,"yyyy-MM-dd"),r=e.find(e=>e.date.startsWith(n));return r?r.totalScore:null};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"History"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Your performance at a glance."})]}),(0,r.jsxs)("div",{className:"glass-panel p-6 max-w-xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("button",{onClick:()=>s(addMonths(n,-1)),className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors",children:(0,r.jsx)(d.Z,{})}),(0,r.jsx)("h2",{className:"text-xl font-bold",children:(0,l.ZP)(n,"MMMM yyyy")}),(0,r.jsx)("button",{onClick:()=>s(addMonths(n,1)),className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors",children:(0,r.jsx)(u.Z,{})})]}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["S","M","T","W","T","F","S"].map(e=>(0,r.jsx)("div",{className:"text-center text-xs text-gray-400 font-bold",children:e},e))}),(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[x.map((e,t)=>(0,r.jsx)("div",{},"empty-".concat(t))),f.map(e=>{let t=getScore(e);return(0,r.jsxs)("div",{className:"aspect-square flex flex-col items-center justify-center relative group",children:[(0,r.jsx)(o.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:(0,c.cn)("w-10 h-10 rounded-xl flex items-center justify-center text-sm font-medium transition-all cursor-default",null===t?"bg-gray-100 dark:bg-white/5 text-gray-400":t>0?"bg-green-500 text-white shadow-lg shadow-green-500/20":t<0?"bg-red-500 text-white shadow-lg shadow-red-500/20":"bg-gray-300 dark:bg-gray-700 text-white"),children:(0,l.ZP)(e,"d")}),null!==t&&(0,r.jsxs)("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 bg-black text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-10 transition-opacity",children:["Score: ",t]})]},e.toString())})]})]})]})}},60345:function(e,t,n){"use strict";n.d(t,{cn:function(){return cn}});var r=n(57042),a=n(74769);function cn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[777,928,769,971,472,744],function(){return e(e.s=8011)}),_N_E=e.O()}]);