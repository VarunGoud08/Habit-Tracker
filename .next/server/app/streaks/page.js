(()=>{var e={};e.id=709,e.ids=[709],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},22385:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(3528);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},40826:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>o});var s=a(67096),r=a(16132),n=a(37284),i=a.n(n),l=a(32564),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(t,d);let o=["",{children:["streaks",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,74806)),"/Users/varun/Desktop/Habit Tracker/src/app/streaks/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,33533)),"/Users/varun/Desktop/Habit Tracker/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/varun/Desktop/Habit Tracker/src/app/streaks/page.tsx"],p="/streaks/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/streaks/page",pathname:"/streaks",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},28196:(e,t,a)=>{Promise.resolve().then(a.bind(a,80104))},80104:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>StreaksPage});var s=a(30784),r=a(9885),n=a(22345),i=a(91745),l=a(28348),d=a(56206);function StreakForm({onClose:e,onSave:t,initialData:a}){let[n,o]=(0,r.useState)({name:a?.name||"",description:a?.description||"",type:a?.type||"AVOID"}),[c,p]=(0,r.useState)(!1),handleSubmit=async e=>{e.preventDefault(),p(!0);let s=a?`/api/streaks/${a.id}`:"/api/streaks";await fetch(s,{method:a?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),p(!1),t()};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/20 backdrop-blur-sm",children:(0,s.jsxs)(i.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-black w-full max-w-md rounded-3xl p-6 shadow-2xl border border-gray-100 dark:border-zinc-800",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/20 rounded-lg text-orange-500",children:s.jsx(l.Z,{size:20})}),s.jsx("h2",{className:"text-xl font-bold",children:a?"Edit Streak":"New Streak"})]}),s.jsx("button",{onClick:e,children:s.jsx(d.Z,{size:20})})]}),(0,s.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Name"}),s.jsx("input",{required:!0,className:"input-field",value:n.name,onChange:e=>o({...n,name:e.target.value}),placeholder:"e.g. No Sugar"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Type"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>o({...n,type:"AVOID"}),className:`p-3 rounded-xl border-2 text-sm font-bold transition-all ${"AVOID"===n.type?"border-orange-500 bg-orange-50 text-orange-600 dark:bg-orange-900/10":"border-transparent bg-gray-50 text-gray-400"}`,children:["AVOID",s.jsx("span",{className:"block text-[10px] font-normal opacity-70",children:"Bad habits (e.g. Junk Food)"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>o({...n,type:"MAINTAIN"}),className:`p-3 rounded-xl border-2 text-sm font-bold transition-all ${"MAINTAIN"===n.type?"border-blue-500 bg-blue-50 text-blue-600 dark:bg-blue-900/10":"border-transparent bg-gray-50 text-gray-400"}`,children:["MAINTAIN",s.jsx("span",{className:"block text-[10px] font-normal opacity-70",children:"Good habits (e.g. Reading)"})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Description"}),s.jsx("textarea",{className:"input-field min-h-[80px] py-3",value:n.description,onChange:e=>o({...n,description:e.target.value}),placeholder:"Rules for this streak..."})]}),(0,s.jsxs)("div",{className:"pt-4 flex gap-3",children:[s.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 bg-gray-100 dark:bg-zinc-900 rounded-xl font-medium",children:"Cancel"}),s.jsx("button",{disabled:c,type:"submit",className:"flex-1 py-3 bg-black text-white dark:bg-white dark:text-black rounded-xl font-medium",children:c?"Saving...":"Start Streak"})]})]})]})})}var o=a(22385),c=a(11821);function StreaksPage(){let[e,t]=(0,r.useState)([]),[a,d]=(0,r.useState)([]),[p,x]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),fetchData=async()=>{let e=await fetch("/api/streaks"),a=await e.json();t(a);let s=(0,c.ZP)(new Date,"yyyy-MM-dd"),r=await fetch(`/api/streaks/log?date=${s}`),n=await r.json();d(n)};(0,r.useEffect)(()=>{fetchData()},[]);let handleUpdateStatus=async(e,s)=>{let r=[...a],n=r.findIndex(t=>t.streakId===e);n>=0?r[n]={...r[n],status:s}:r.push({streakId:e,status:s}),d(r);let i=await fetch("/api/streaks/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({streakId:e,date:(0,c.ZP)(new Date,"yyyy-MM-dd"),status:s})}),l=await i.json();l.streak&&t(e=>e.map(e=>e.id===l.streak.id?l.streak:e))},getStatus=e=>a.find(t=>t.streakId===e)?.status||"UNTRACKED";return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[s.jsx(l.Z,{className:"text-orange-500 fill-orange-500"}),"Streaks"]}),s.jsx("p",{className:"text-gray-500",children:"Protect your chains. Never break a streak."})]}),(0,s.jsxs)("button",{onClick:()=>{m(null),x(!0)},className:"btn-primary flex items-center gap-2",children:[s.jsx(o.Z,{size:20}),"New Streak"]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.map((e,t)=>s.jsx(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},children:s.jsx(n.Z,{streak:e,status:getStatus(e.id),onUpdateStatus:handleUpdateStatus})},e.id)),0===e.length&&s.jsx("div",{className:"col-span-full py-12 text-center text-gray-500 border-2 border-dashed border-gray-200 dark:border-zinc-800 rounded-3xl",children:s.jsx("p",{children:"No streaks active."})})]}),p&&s.jsx(StreakForm,{onClose:()=>x(!1),onSave:()=>{x(!1),fetchData()},initialData:u})]})}},74806:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>d});var s=a(95153);let r=(0,s.createProxy)(String.raw`/Users/varun/Desktop/Habit Tracker/src/app/streaks/page.tsx`),{__esModule:n,$$typeof:i}=r,l=r.default,d=l}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[964,821,141,111,345],()=>__webpack_exec__(40826));module.exports=a})();